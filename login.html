<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SecCoach ‚Äì Logowanie</title>
  <link rel="icon" type="image/png" href="assets/logo-seccoach.png">
  <style>
    :root{
      --bg:#0f172a; --panel:#111827; --muted:#94a3b8; --text:#e5e7eb;
      --accent:#38bdf8; --accent-2:#34d399; --danger:#f43f5e; --border:#1f2937;
    }
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,sans-serif}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:20px}
    .card{width:min(520px,92vw);background:#0b1220;border:1px solid var(--border); border-radius:16px; padding:22px}
    .logo{display:flex;justify-content:center;margin-bottom:12px}
    .logo img{height:56px}
    h1{margin:.2rem 0 1rem;text-align:center}
    label{display:block;color:var(--muted);margin-bottom:6px}
    input,button{width:100%;border:1px solid var(--border);background:#0e1627;color:var(--text);border-radius:12px;padding:12px 14px;font-size:16px}
    input:invalid{border-color:var(--danger)}
    .row{display:grid;gap:10px;margin:12px 0}
    .primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#0b1220;border:none;font-weight:800;cursor:pointer}
    .muted{color:var(--muted);font-size:13px;text-align:center;margin-top:6px}
    .controls{display:flex;gap:8px}
    .btn{cursor:pointer}
    .ghost{background:#0e1627}
    .theme{position:fixed;top:10px;right:10px}
    .light{--bg:#f8fafc;--panel:#ffffff;--text:#0b1220;--muted:#475569;--border:#e2e8f0; background:#f8fafc;color:#0b1220}
  </style>
</head>
<body>
  <button id="themeToggle" class="btn theme">üåì</button>
  <div class="wrap">
    <div class="card" role="form" aria-labelledby="title">
      <div class="logo"><img src="assets/logo-seccoach.png" alt="SecCoach ‚Äì logo"></div>
      <h1 id="title">Zaloguj siƒô do SecCoach</h1>
      <div class="row">
        <label for="email">E-mail firmowy</label>
        <input id="email" type="email" placeholder="imie.nazwisko@firma.pl" required aria-required="true" aria-label="E-mail firmowy">
      </div>
      <div class="row controls">
        <button id="loginBtn" class="primary" aria-label="Zaloguj">Zaloguj</button>
        <button id="demoBtn" class="ghost" aria-label="Wype≈Çnij przyk≈Çadowym adresem">U≈ºyj demo</button>
      </div>
      <p class="muted">E-mail jest u≈ºywany tylko lokalnie, nie jest nigdzie wysy≈Çany.</p>
    </div>
  </div>
  <script>
    const emailEl = document.getElementById('email');
    const loginBtn = document.getElementById('loginBtn');
    const demoBtn  = document.getElementById('demoBtn');
    const themeBtn = document.getElementById('themeToggle');

    // Motyw
    const savedTheme = localStorage.getItem('seccoach_theme') || 'dark';
    if(savedTheme==='light') document.body.classList.add('light');
    themeBtn.onclick = () => {
      document.body.classList.toggle('light');
      localStorage.setItem('seccoach_theme', document.body.classList.contains('light') ? 'light' : 'dark');
    };

    // Demo
    demoBtn.onclick = () => { emailEl.value = 'demo@firma.pl'; emailEl.reportValidity(); };

    function emailOK(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test((v||'').trim()); }

    // Enter = logowanie
    emailEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ loginBtn.click(); } });

    loginBtn.onclick = () => {
      const email = emailEl.value.trim().toLowerCase();
      if(!emailOK(email)){ emailEl.reportValidity(); return; }
      localStorage.setItem('quizUserEmail', email);
      // flaga admina: je≈õli e-mail jest na ‚Äûbia≈Çej li≈õcie‚Äù
      const ADMIN_EMAILS = ['admin@seccoach', 'admin@firma.pl'];
      localStorage.setItem('isAdmin', ADMIN_EMAILS.includes(email) ? '1' : '0');
      // przeniesienie do quizu
      location.href = 'index.html';
    };

    // Je≈õli pamiƒôtamy e-mail, wpisz i pozw√≥l kliknƒÖƒá od razu
    const saved = localStorage.getItem('quizUserEmail'); if(saved){ emailEl.value=saved; }
  </script>
</body>
</html>
